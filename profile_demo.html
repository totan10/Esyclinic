<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Doctor's Profile - Dr. Ashutosh Samal</title>
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
    rel="stylesheet"
    crossorigin="anonymous"
  />
  <style>
    /* Add custom styles here */
#doctorProfileContainer{
  margin: 0;
}
.doctor-profile {
  margin-bottom: 30px;
  display: flex;
  justify-content: flex-start;
}

.doctor-image {
  margin-right: 30px;
  flex-shrink: 0; /* Prevent image from shrinking */
  width: 200px; /* Adjust image width */
  height: auto; /* Maintain aspect ratio */
}

.doctor-info {
  flex: 1;
}

.designation {
  margin-bottom: 10px;
  font-weight: bold;
}

.specialization,
.experience,
.qualification {
  margin-bottom: 5px;
}

.fees,
.id,
.mobile,
.language,
.sex {
  margin-bottom: 5px;
}

.appointments {
  text-align: center;
}

.slot-container {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  margin-top: 10px;
}

.slot-option {
  border: none;
  border-radius: 5px;
  padding: 5px 10px;
  cursor: pointer;
  background-color: #6c757d;
  color: white;
  transition: background-color 0.3s;
  box-shadow: 0 2px 7px rgba(0, 0, 0, 0.1);
}

.slot-option:hover {
  background-color: #495057;
}

.date-cell {
  cursor: pointer;
  padding: 5px;
  border-radius: 5px;
  margin-right: 10px;
  transition: background-color 0.3s, color 0.3s;
  width: 120px; /* Fixed width to prevent shaking */
  border-bottom: 2px solid #f8f9fa;
  text-align: center;
  box-shadow: 0 2px 7px rgba(0, 0, 0, 0.1);
}

.date-cell:hover {
  background-color: #e2e5e8;
  border-bottom: 2px solid #007bff;
}

.selected-date {
  background-color: #007bff;
  color: white;
  border-radius: 5px;
  padding: 5px;
  transition: background-color 0.3s, color 0.3s;
}

.selected-date:hover {
  background-color: #0056b3;
}

/* Adjust container width for large devices */
/* @media (min-width: 992px) {
  .container {
    max-width: 60%;
  }
} */

  </style>
</head>
<body>
  <div class="container mt-5" id="doctorProfileContainer">
    <!-- Doctor's profile will be added dynamically here -->
  </div>
  <div class="container mt-5" id="slotsContainer">
    <h3>Available Slots</h3>
    <div id="datesRow" class="d-flex">
      <!-- Dates will be populated dynamically here -->
    </div>
    <div id="slotsBody" class="slot-container">
      <!-- Slots will be dynamically added here -->
    </div>
  </div>
  <!-- Add this modal markup after the existing HTML content -->
  <div
    class="modal fade"
    id="appointmentModal"
    tabindex="-1"
    aria-labelledby="appointmentModalLabel"
    aria-hidden="true"
  >
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="appointmentModalLabel">
            Book Appointment
          </h5>
          <button
            type="button"
            class="btn-close"
            data-bs-dismiss="modal"
            aria-label="Close"
          ></button>
        </div>
        <div class="modal-body">
          <!-- Add your appointment booking form here -->
          <form id="appointmentForm">
            <div class="mb-3">
              <label for="appointmentDate" class="form-label">Date:</label>
              <input
                type="date"
                class="form-control"
                id="appointmentDate"
                required
              />
            </div>
            <div class="mb-3">
              <label for="appointmentTime" class="form-label">Time:</label>
              <input
                type="time"
                class="form-control"
                id="appointmentTime"
                required
              />
            </div>
            <!-- Add more form fields as needed -->
            <button type="submit" class="btn btn-primary" id="bookAppointmentBtn" disabled>Submit</button>
          </form>
        </div>
      </div>
    </div>
  </div>

  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
    crossorigin="anonymous"
  ></script>

  <script>
    // Create a function to generate the doctor's profile page
    function generateDoctorProfilePage(doctorData) {
      // Create container element
      const container = document.createElement("div");
      container.classList.add("container", "mt-5");
      const profileContainer = document.getElementById(
        "doctorProfileContainer"
      );
      // Create profile row
      const profileRow = document.createElement("div");
      profileRow.classList.add("row", "doctor-profile");

      // Create image column
      const imageCol = document.createElement("div");
      imageCol.classList.add("col-md-4", "col-sm-12", "doctor-image");
      const image = document.createElement("img");
      image.src = doctorData.DR_PHOTO;
      image.alt = doctorData.DR_NAME;
      image.classList.add("img-thumbnail");
      imageCol.appendChild(image);

      // Create info column
      const infoCol = document.createElement("div");
      infoCol.classList.add("col-md-8", "col-sm-12", "doctor-info");
      const nameHeader = document.createElement("h2");
      nameHeader.textContent = doctorData.DR_NAME;
      const designationPara = document.createElement("p");
      designationPara.classList.add("designation");
      designationPara.textContent = doctorData.DESIGNATION;
      const specializationDiv = document.createElement("div");
      specializationDiv.classList.add("specialization");
      specializationDiv.innerHTML = `<b>Specialization:</b> ${doctorData.D_CATG}`;
      const experienceDiv = document.createElement("div");
      experienceDiv.classList.add("experience");
      experienceDiv.innerHTML = `<b>Experience:</b> ${doctorData.EXPERIENCE}`;
      const qualificationDiv = document.createElement("div");
      qualificationDiv.classList.add("qualification");
      qualificationDiv.innerHTML = `<b>Qualification:</b> ${doctorData.QUALIFICATION}`;
      const feesDiv = document.createElement("div");
      feesDiv.classList.add("fees");
      feesDiv.innerHTML = `<b>Fees:</b> ${doctorData.DR_FEES}`;
      const idDiv = document.createElement("div");
      idDiv.classList.add("id");
      idDiv.innerHTML = `<b>ID:</b> ${doctorData.DR_ID}`;
      const mobileDiv = document.createElement("div");
      mobileDiv.classList.add("mobile");
      mobileDiv.innerHTML = `<b>Mobile:</b> ${doctorData.DR_MOBILE}`;
      const languageDiv = document.createElement("div");
      languageDiv.classList.add("language");
      languageDiv.innerHTML = `<b>Language:</b> ${doctorData.LANGUAGE}`;
      const sexDiv = document.createElement("div");
      sexDiv.classList.add("sex");
      sexDiv.innerHTML = `<b>Sex:</b> ${doctorData.SEX}`;
      const appointmentButton = document.createElement("button");
      appointmentButton.type = "button";
      appointmentButton.classList.add(
        "btn",
        "btn-primary",
        "book-appointment"
      );
      appointmentButton.textContent = "Book Appointment";
      appointmentButton.dataset.bsToggle = "modal";
      appointmentButton.dataset.bsTarget = "#appointmentModal";

      // Append elements to info column
      infoCol.appendChild(nameHeader);
      infoCol.appendChild(designationPara);
      infoCol.appendChild(specializationDiv);
      infoCol.appendChild(experienceDiv);
      infoCol.appendChild(qualificationDiv);
      infoCol.appendChild(feesDiv);
      infoCol.appendChild(idDiv);
      infoCol.appendChild(mobileDiv);
      infoCol.appendChild(languageDiv);
      infoCol.appendChild(sexDiv);
      infoCol.appendChild(appointmentButton);

      // Append columns to profile row
      profileRow.appendChild(imageCol);
      profileRow.appendChild(infoCol);

      // Create slots row (if needed)
      // You can add this part if you want to include available slots information

      // Append rows to container
      container.appendChild(profileRow);
      // Append container to body
      profileContainer.appendChild(container);
    }
    // Parse URL parameters to get doctor's data
    const queryString = window.location.search;
    const urlParams = new URLSearchParams(queryString);
    const doctor = Object.fromEntries(urlParams.entries());
    const doctorData = doctor;
    generateDoctorProfilePage(doctorData);
    // Call the function to generate the page

    // Add event listener to handle modal opening
    document
      .querySelector(".book-appointment")
      .addEventListener("click", function () {
        var myModal = new bootstrap.Modal(
          document.getElementById("appointmentModal")
        );
        myModal.show();
      });
    // Add event listener to handle modal closing
    document
      .getElementById("appointmentModal")
      .addEventListener("hidden.bs.modal", function () {
        // Remove the modal backdrop when the modal is closed
        document.querySelector(".modal-backdrop").remove();
      });

    // Handle form submission if needed
    document
      .getElementById("appointmentForm")
      .addEventListener("submit", function (event) {
        // Prevent default form submission
        event.preventDefault();
        // Handle form submission logic here
        // You can use JavaScript to process the form data or send it to a server via AJAX
        // After processing, you can close the modal if needed:
        // var myModal = new bootstrap.Modal(document.getElementById('appointmentModal'));
        // myModal.hide();
      });

    // Function to generate available slots table
    function generateSlotsTable() {
      const slotsBody = document.getElementById("slotsBody");
      const datesRow = document.getElementById("datesRow");

      // Clear existing slots and dates
      slotsBody.innerHTML = "";
      datesRow.innerHTML = ""; // Clear dates

      // Get current date
      const currentDate = new Date();

      // Generate slots for the next 5 days
      for (let i = 0; i < 5; i++) {
        const date = new Date();
        date.setDate(currentDate.getDate() + i);

        const dateString = formatDate(date);

        const dateCell = document.createElement("div");
        dateCell.textContent = dateString;
        dateCell.dataset.date = dateString;
        dateCell.classList.add("date-cell");
        datesRow.appendChild(dateCell);
      }
    }

    // Function to format date as YYYY-MM-DD
    function formatDate(date) {
      const year = date.getFullYear();
      const month = (date.getMonth() + 1).toString().padStart(2, "0");
      const day = date.getDate().toString().padStart(2, "0");
      return `${year}-${month}-${day}`;
    }

    // Sample function to get available slots for a date (replace with your own logic)
    function getAvailableSlots(date) {
      // For demonstration, assume slots are available for all dates
      if (date.getDate() % 2 === 0) {
        return ["10:00 AM", "11:00 AM", "12:00 PM", "2:00 PM", "3:00 PM", "4:00 PM"];
      } else {
        return ["9:00 AM", "10:00 AM", "1:00 PM", "3:00 PM", "4:00 PM"];
      }
    }

    // Call the function to generate available slots table
    generateSlotsTable();

    // Add event listener to handle clicking on a date to populate available slots
    document.getElementById("datesRow").addEventListener("click", function (event) {
      const target = event.target;
      if (target && target.classList.contains("date-cell")) {
        const date = target.dataset.date;
        populateSlots(date);
        // Add selected date styling
        const allDateCells = document.querySelectorAll(".date-cell");
        allDateCells.forEach(cell => {
          cell.classList.remove("selected-date");
        });
        target.classList.add("selected-date");
      }
    });

    // Function to populate slots for a given date
    function populateSlots(date) {
      const slotsBody = document.getElementById("slotsBody");
      slotsBody.innerHTML = ""; // Clear existing slots

      const availableSlots = getAvailableSlots(new Date(date));

      if (availableSlots.length > 0) {
        availableSlots.forEach(slot => {
          const slotDiv = document.createElement("div");
          slotDiv.classList.add("slot-option");
          slotDiv.textContent = slot;
          slotDiv.dataset.date = date;
          slotDiv.dataset.time = slot;
          slotsBody.appendChild(slotDiv);
        });
      } else {
        const noSlotsDiv = document.createElement("div");
        noSlotsDiv.textContent = "No slots available";
        slotsBody.appendChild(noSlotsDiv);
      }
    }

    // Add event listener to handle booking slot
    document.getElementById("slotsBody").addEventListener("click", function (event) {
      if (event.target && event.target.classList.contains("slot-option")) {
        const date = event.target.dataset.date;
        const time = event.target.dataset.time;
        document.getElementById("appointmentDate").value = date;
        document.getElementById("appointmentTime").value = time;
        document.getElementById("bookAppointmentBtn").disabled = false;
      }
    });
  </script>
</body>
</html>
